execution_plan:
  tracer:
    tracer_location: /vagrant/rosetracer/target/release/rosetracer
    pipe_location: /tmp/containerpid
    tracing_type: production_trace,process_controlled
  cleanup:
    duration: 30
nodes:
  tendermint:
    container: false
    script: /vagrant/schedules/reproducedbugs/tendermint/tendermint.sh

faults:
  change_fstat_result:
    type: syscall
    details:
      name: newfstatat
      return_value: -1
      success: False

    traced: tendermint
    target: tendermint
    begin_conditions:
      - condition1:
          type: user_function
          binary_location: "/vagrant/rw/tendermint/build/tendermint"
          symbol: github.com/tendermint/tendermint/libs/os.EnsureDir
          call_count: 1
      - condition2:
          type: file_syscall
          syscall_name: newfstatat
          file_name: /.tendermint/data
          call_count: 1

  # change_open_result:
  #   type: syscall
  #   details:
  #     name: openat
  #     return_value: -1
  #     success: False
  #   target: tendermint

  #   begin_conditions:
  #     - condition1:
  #         type: user_function
  #         binary_location: "/vagrant/rw/tendermint/build/tendermint"
  #         symbol: github.com/tendermint/tendermint/libs/os.EnsureDir
  #         call_count: 3
  #     - condition2:
  #         type: file_syscall
  #         syscall_name: openat
  #         file_name: /.tendermint/data/priv
  #         call_count: 1
