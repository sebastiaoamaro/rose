execution_plan:
  maximum_time: 90
  setup:
    script: "/vagrant/schedules/reproduced_bugs/redisraft/scripts/startredisclusterb9ee410.sh"
    duration: 5
  workload:
    wait_time: 15
    script: /vagrant/schedules/reproduced_bugs/redisraft/scripts/runworkload.sh
  cleanup:
    #   script: /vagrant/schedules/reproduced_bugs/redisraft/scripts/cleanup.sh
    duration: 15
  tracer:
    tracer_location: "/vagrant/tracer/target/release/tracer"
    pipe_location: "/tmp/containerpid"
    functions_file: /vagrant/profiler/redisraft/functions_b9ee410.txt
    binary_to_examine: "/redisraft.so"
    tracing_type: production_trace,container_controlled
nodes:
  redis1:
    container: true
    binary: /redisraft.so
    leader_symbol: raft_become_leader
    ip: 172.19.1.10
    leader: true
    script: "./startredis.sh 1 172.19.1.10"
  redis2:
    container: true
    binary: /redisraft.so
    leader_symbol: raft_become_leader
    ip: 172.19.1.11
    script: "./startredis.sh 2 172.19.1.11"
  redis3:
    container: true
    binary: /redisraft.so
    leader_symbol: raft_become_leader
    ip: 172.19.1.12
    script: "./startredis.sh 3 172.19.1.12"
  redis4:
    container: true
    binary: /redisraft.so
    leader_symbol: raft_become_leader
    ip: 172.19.1.13
    script: "./startredis.sh 4 172.19.1.13"
  redis5:
    container: true
    binary: /redisraft.so
    leader_symbol: raft_become_leader
    ip: 172.19.1.14
    script: "./startredis.sh 5 172.19.1.14"

faults:
  process_kill_all1:
    type: process_kill
    target: majority
    begin_conditions:
      - condition1:
          type: time
          time: 20000

  block_ips_redis1:
    type: block_ips
    target: redis1
    traced: redis2
    duration: 25000
    ips_in:
      - redis2
      - redis3
      - redis4
      - redis5
    ips_out:
      - redis2
      - redis3
      - redis4
      - redis5
    begin_conditions:
      - condition1:
          type: time
          time: 25000

  block_ips_redis2:
    type: block_ips
    target: redis2
    traced: redis2
    duration: 25000
    ips_in:
      - redis1
    ips_out:
      - redis1
    begin_conditions:
      - condition1:
          type: time
          time: 25000

  block_ips_redis3:
    type: block_ips
    target: redis3
    traced: redis3
    duration: 25000
    ips_in:
      - redis1
    ips_out:
      - redis1
    begin_conditions:
      - condition1:
          type: time
          time: 25000

  block_ips_redis4:
    type: block_ips
    target: redis4
    traced: redis4
    duration: 25000
    ips_in:
      - redis1
    ips_out:
      - redis1
    begin_conditions:
      - condition1:
          type: time
          time: 25000

  block_ips_redis5:
    type: block_ips
    target: redis5
    traced: redis5
    duration: 25000
    ips_in:
      - redis1
    ips_out:
      - redis1
    begin_conditions:
      - condition1:
          type: time
          time: 25000

  process_kill1:
    type: process_kill
    target: redis1
    traced: redis1
    exit: true
    begin_conditions:
      - condition1:
          type: user_function
          binary_location: "/redisraft.so"
          symbol: handleLoadSnapshot
          offset: 0
          call_count: 1
      - condition2:
          type: user_function
          binary_location: "/redisraft.so"
          symbol: RaftLogCreate
          offset: 0
          call_count: 1
      - condition3:
          type: time
          time: 25000
