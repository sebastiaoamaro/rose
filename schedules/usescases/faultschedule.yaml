nodes:
  redpanda1:
    pid: 12345
    veth: lo
    ip: "1.1.1.1"
  redpanda2:
    veth: enp0s31f6
    ip: "1.1.1.2"
  rethinkdb1:
    veth: wlp0s20f3
    ip: "1.1.1.3"
  rethinkdb2:
    veth: docker0
    ip: "1.1.1.4"
  rethinkdb3:
    veth: docker_gwbridge
    ip: "1.1.1.5"
  tendermint:
    pid: 12345
  test_node:
    script: "/home/sebastiaoamaro/phd/torefidevel/tests/random/a.out 1"
faults:
  Pause:
    type: process_pause
    duration: 5
    target: redpanda1
    repeatable: No
    begin_conditions:
      time: 5
      trigger_statement : 1

  network_partition:
    type: network_partition
    network_partitions:
      partition1:
        rethinkdb1
        rethinkdb2
      partition2:
        rethinkdb3
    repeatable: No
    begin_conditions:
      time: 5
      trigger_statement : 1
  
  block_ips:
    type: block_ips
    target: redpanda2
    ips:
      redpanda1
    begin_conditions:
      time: 10
      trigger_statement : 1

  syscall:
    type: syscall
    details:
      name: newfstatat
      return_value: 20
    begin_conditions:
      time: 15
      trigger_statement : 1

  file_system_op:
    type: file_system_operation
    details:
      name: newfstatat
      directory_name: data
      file_name: data/config.xml
      success: True
      return_value: 20
    begin_conditions:
      time: 15
      syscall:
        syscall_name: "write"
        call_count: 1
      trigger_statement : 1

  # stat_operation:
  #   type: file_system_operation
  #   details:
  #     name: newfstatat
  #     file_name: data.yaml
  #     success: True
  #     return_value: 20
  #   target: tendermint
  #   repeatable: No
  #   begin_conditions:
  #     user_function:
  #       binary_location: ../../tendermint
  #       symbol: :github.com/tendermint/tendermint/libs/os.Ensuredir
  #       call_count: 1
  #     file_syscall:
  #       syscall_name: newfstatat
  #       file_name: data.xml
  #       call_count: 1

  #     trigger_statement: 1 & 2

  simple_test:
    type: process_pause
    target: test_node
    begin_conditions:
      time: 5
      user_function:
        binary_location: "/home/sebastiaoamaro/phd/torefidevel/tests/random/a.out"
        symbol: "uprobing"
        call_count: 1
      trigger_statement: 1