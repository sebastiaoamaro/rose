execution_plan:
  maximum_time: 60
  setup:
    script: /vagrant/schedules/bug_discovery/redis_setup/start_cluster.sh
    duration: 20
  workload:
    script: /vagrant/schedules/bug_discovery/redis_setup/start_workload.sh
  cleanup:
    script: /vagrant/schedules/bug_discovery/redis_setup/cleanup.sh
    duration: 15
  pre_workload:
    script: /vagrant/schedules/bug_discovery/redis_setup/init_cluster.sh
  lazyfs:
    enabled: true
    lazyfs_script: /vagrant/lazyfs/lazyfs/scripts/mount-lazyfs.sh
    #TODO: CRIAR OUTRA PASTA
    root_dir: /vagrant/lazyfs/tmp/lazyfs.root
    mount_dir: /vagrant/lazyfs/tmp/lazyfs.mnt
    pipe_location: /vagrant/lazyfs/tmp/faults.fifo

  tracer:
    tracer_location: "/vagrant/tracer/target/release/tracer"
    pipe_location: "/tmp/containerpid"
    binary_to_examine: "/usr/local/bin/redis-server"
    tracing_type: sys_all_trace,container_controlled
nodes:
  node1:
    container: true
    script: /scripts/start_redis.sh
    ip: 172.38.0.11
  node2:
    container: true
    script: /scripts/start_redis.sh
    ip: 172.38.0.12
  node3:
    container: true
    script: /scripts/start_redis.sh
    ip: 172.38.0.13

faults:
  lazyfs_clear_cache:
    type: lazyfs
    target: node1
    details:
      operation: clear_cache
    begin_conditions:
      - condition1:
          type: time
          time: 10000
  lazyfs_torn_op:
    type: lazyfs
    target: node1
    details:
      operation: torn_op
    begin_conditions:
      - condition1:
          type: time
          time: 15000
  lazyfs_torn_sec:
    type: lazyfs
    target: node1
    details:
      operation: torn_seq
    begin_conditions:
      - condition1:
          type: time
          time: 20000
  lazyfs_crash_fs:
    type: lazyfs
    target: node1
    details:
      operation: crash_fs
    begin_conditions:
      - condition1:
          type: time
          time: 25000
